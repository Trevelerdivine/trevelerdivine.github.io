<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>原神最適化計算機</title>
    <link rel="stylesheet" href="./data/css/index.css">
    <script src="./script.js"></script>
    <script src="./data/character/char_class/char_class.js"></script>
    <script src="./data/weapon/weapon_class/weapon_class.js"></script>
    <script src="./show_char_statsform.js"></script>
    <script src="./show_weapon_statsform.js"></script>
  </head>
  <body>

 <div>
 <h1>換算最適化スコア計算機</h1>
 <div>
  <label class="open_char" for="pop-up_char">
      <img class="popup-image" src="./character/nahida.webp" alt="画像の説明" style="width: 100px; height: 100px;">
    </label>
    <input type="checkbox" id="pop-up_char">
    <div class="overlay_char">
      <div class="window">
        <div class="table-container1">
            <div class="table-buttons">
              <button onclick="toggleTableRow(0)">炎元素</button>
              <button onclick="toggleTableRow(1)">水元素</button>
              <button onclick="toggleTableRow(2)">氷元素</button>
              <button onclick="toggleTableRow(3)">雷元素</button>
              <button onclick="toggleTableRow(4)">風元素</button>
              <button onclick="toggleTableRow(5)">草元素</button>
              <button onclick="toggleTableRow(6)">岩元素</button>
  </div>
          <table>
         <tbody>
              <tr>
                <td class="tierPyro"><img id="0" class="tier-image3" src="./character/dehya.webp"></td>
                <td class="tierPyro"><img id="1" class="tier-image3" src="./character/yoimiya.webp"></td>
                <td class="tierPyro"><img id="2" class="tier-image3" src="./character/hutao.jpg"></td>
                <td class="tierPyro"><img id="3" class="tier-image3" src="./character/klee.webp"></td>
                <td class="tierPyro"><img id="4" class="tier-image3" src="./character/diluc.jpg"></td>
                <td class="tierPyro"><img id="5" class="tier-image3" src="./character/thoma.webp"></td>
                <td class="tierPyro"><img id="6" class="tier-image3" src="./character/yanfei.webp"></td>
                <td class="tierPyro"><img id="7" class="tier-image3" src="./character/xinyan.webp"></td>
                <td class="tierPyro"><img id="8" class="tier-image3" src="./character/bennett.webp"></td>
                <td class="tierPyro"><img id="9" class="tier-image3" src="./character/xiangling.webp"></td>
                <td class="tierPyro"><img id="10" class="tier-image3" src="./character/amber.jpg"></td>
              </tr>
              <tr>
                <td class="tierHydro"><img id="11" class="tier-image3" src="./character/nirou.webp"></td>
                <td class="tierHydro"><img id="12" class="tier-image3" src="./character/yelan.webp"></td>
                <td class="tierHydro"><img id="13" class="tier-image3" src="./character/kamisatoayato.jpg"></td>
                <td class="tierHydro"><img id="14" class="tier-image3" src="./character/sangonomiyakokomi.jpg"></td>
                <td class="tierHydro"><img id="15" class="tier-image3" src="./character/tartaglia.webp"></td>
                <td class="tierHydro"><img id="16" class="tier-image3" src="./character/mona.webp"></td>
                <td class="tierHydro"><img id="17" class="tier-image3" src="./character/candace.jpg"></td>
                <td class="tierHydro"><img id="18" class="tier-image3" src="./character/barbara.jpg"></td>
                <td class="tierHydro"><img id="19"class="tier-image3" src="./character/xingqiu.webp"></td>                
              </tr>
              <tr>
                <td class="tierCyro"><img id="20" class="tier-image3" src="./character/shenhe.webp"></td>
                <td class="tierCyro"><img id="21" class="tier-image3" src="./character/kamisatoayaka.webp"></td>
                <td class="tierCyro"><img id="22" class="tier-image3" src="./character/eula.webp"></td>
                <td class="tierCyro"><img id="23" class="tier-image3" src="./character/ganyu.webp"></td>
                <td class="tierCyro"><img id="24" class="tier-image3" src="./character/qiqi.webp"></td>
                <td class="tierCyro"><img id="25" class="tier-image3" src="./character/aloy.webp"></td>
                <td class="tierCyro"><img id="26" class="tier-image3" src="./character/mika.webp"></td>
                <td class="tierCyro"><img id="27" class="tier-image3" src="./character/layla.webp"></td>
                <td class="tierCyro"><img id="28"class="tier-image3" src="./character/rosaria.webp"></td>   
                <td class="tierCyro"><img id="29" class="tier-image3" src="./character/diona.webp"></td>
                <td class="tierCyro"><img id="30"class="tier-image3" src="./character/chongyun.webp"></td>  
                <td class="tierCyro"><img id="31"class="tier-image3" src="./character/kaeya.jpg"></td>    
              </tr>
              <tr>
                <td class="tierErectro"><img id="32" class="tier-image3" src="./character/cyno.jpg"></td>
                <td class="tierErectro"><img id="33" class="tier-image3" src="./character/yaemiko.webp"></td>
                <td class="tierErectro"><img id="34" class="tier-image3" src="./character/raidenshougun.jpg"></td>
                <td class="tierErectro"><img id="35" class="tier-image3" src="./character/keqing.jpg"></td>
                <td class="tierErectro"><img id="36" class="tier-image3" src="./character/dori.jpg"></td>
                <td class="tierErectro"><img id="37" class="tier-image3" src="./character/kukishinobu.jpg"></td>
                <td class="tierErectro"><img id="38" class="tier-image3" src="./character/kujousara.jpg"></td>
                <td class="tierErectro"><img id="39" class="tier-image3" src="./character/fischl.webp"></td>
                <td class="tierErectro"><img id="40"class="tier-image3" src="./character/beidou.webp"></td>   
                <td class="tierErectro"><img id="41" class="tier-image3" src="./character/razor.jpg"></td>
                <td class="tierErectro"><img id="42"class="tier-image3" src="./character/lisa.jpg"></td>
                <td class="tierErectro"><img id="43" class="tier-image3" src="./character/travelarelectro.png"></td>
              </tr>
              <tr>
                <td class="tierAnemo"><img id="44" class="tier-image3" src="./character/wanderer.webp"></td>
                <td class="tierAnemo"><img id="45" class="tier-image3" src="./character/kazuhakaedehara.webp"></td>
                <td class="tierAnemo"><img id="46" class="tier-image3" src="./character/xiao.webp"></td>
                <td class="tierAnemo"><img id="47" class="tier-image3" src="./character/venti.jpg"></td>
                <td class="tierAnemo"><img id="48" class="tier-image3" src="./character/jean.jpg"></td>
                <td class="tierAnemo"><img id="49" class="tier-image3" src="./character/faruzan.webp"></td>
                <td class="tierAnemo"><img id="50" class="tier-image3" src="./character/shikanoinheizou.webp"></td>
                <td class="tierAnemo"><img id="51" class="tier-image3" src="./character/sayu.webp"></td>
                <td class="tierAnemo"><img id="52"class="tier-image3" src="./character/sucrose.webp"></td>   
                <td class="tierAnemo"><img id="53" class="tier-image3" src="./character/traveraranemo.png"></td>
              </tr>
              <tr>
                <td class="tierDendro"><img id="54" class="tier-image3" src="./character/baizhu.webp"></td>
                <td class="tierDendro"><img id="55" class="tier-image3" src="./character/alhaitham.webp"></td>
                <td class="tierDendro"><img id="56" class="tier-image3" src="./character/nahida.webp"></td>
                <td class="tierDendro"><img id="57" class="tier-image3" src="./character/tighnari.webp"></td>
                <td class="tierDendro"><img id="58" class="tier-image3" src="./character/kirara.webp"></td>
                <td class="tierDendro"><img id="59" class="tier-image3" src="./character/kaveh.webp"></td>
                <td class="tierDendro"><img id="60" class="tier-image3" src="./character/yaoyao.webp"></td>
                <td class="tierDendro"><img id="61" class="tier-image3" src="./character/collei.webp"></td>
                <td class="tierDendro"><img id="62"class="tier-image3" src="./character/travelardendro.png"></td>   
              </tr>
              <tr>
                <td class="tierGeo"><img id="62" class="tier-image3" src="./character/aratakiitto.webp"></td>
                <td class="tierGeo"><img id="63" class="tier-image3" src="./character/albedo.jpg"></td>
                <td class="tierGeo"><img id="64" class="tier-image3" src="./character/zhongli.webp"></td>
                <td class="tierGeo"><img id="65" class="tier-image3" src="./character/yunjin.webp"></td>
                <td class="tierGeo"><img id="66" class="tier-image3" src="./character/gorou.webp"></td>
                <td class="tierGeo"><img id="67" class="tier-image3" src="./character/noelle.jpg"></td>
                <td class="tierGeo"><img id="68" class="tier-image3" src="./character/ningguang.webp"></td>
                <td class="tierGeo"><img id="69" class="tier-image3" src="./character/travelergeo.png"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
    <div id="Charindex-display"></div>
 <div id = choose_char_weapon>
 <select id="char_level">
    <option value="60+">60+</option>
    <option value="70">70</option>
    <option value="70+">70+</option>
    <option value="80">80</option>
    <option value="80+">80+</option>
    <option value="90" selected>90</option>
 </select>
 <select id="char_constellations" onchange="show_char_statsform()">
    <option value="0" selected>C0</option>
    <option value="1">C1</option>
    <option value="2">C2</option>
    <option value="2">C3</option>
    <option value="3">C4</option>
    <option value="3">C5</option>
    <option value="4">C6</option>
 </select>
 <div>
  <label class="open" for="pop-up">
      <img class="popup-image" src="./artifact/迷宮の遊客_5.png" alt="画像の説明" style="width: 100px; height: 100px;">
      <img class="popup-image" src="./artifact/迷宮の遊客_5.png" alt="画像の説明" style="width: 100px; height: 100px;">
    </label>
    <input type="checkbox" id="pop-up">
    <div class="overlay">
      <div class="window">
        <div class="table-container">
          <table>
            <tbody>
              <tr>
                <td class="tier1"><img id="0" class="tier-image" src="./artifact/偉勲の花_5.png" onclick="changeImageClass(this, 0)"></td>
                <td class="tier1"><img id="1" class="tier-image" src="./artifact/威厳の鰐_5.png" onclick="changeImageClass(this, 1)"></td>
                <td class="tier1"><img id="2" class="tier-image" src="./artifact/栄花の期_5.png" onclick="changeImageClass(this, 2)"></td>
                <td class="tier1"><img id="3" class="tier-image" src="./artifact/夏祭りの花_5.jpg" onclick="changeImageClass(this, 3)"></td>
                <td class="tier1"><img id="4" class="tier-image" src="./artifact/火渡りの堅実_5.png" onclick="changeImageClass(this, 4)"></td>
                <td class="tier1"><img id="5" class="tier-image" src="./artifact/海染の花_5.png" onclick="changeImageClass(this, 5)"></td>
                <td class="tier1"><img id="6" class="tier-image" src="./artifact/楽団の朝の光.png" onclick="changeImageClass(this, 6)"></td>
                <td class="tier1"><img id="7" class="tier-image" src="./artifact/旧貴族の花.png" onclick="changeImageClass(this, 7)"></td>
              </tr>
              <tr>
                <td class="tier1"><img id="8" class="tier-image" src="./artifact/金メッキのコサージュ_5.png" onclick="changeImageClass(this, 8)"></td>
                <td class="tier1"><img id="9" class="tier-image" src="./artifact/血染めの鉄の心_星5.png" onclick="changeImageClass(this, 9)"></td>
                <td class="tier1"><img id="10" class="tier-image" src="./artifact/月娘の華彩.jpg" onclick="changeImageClass(this, 10)"></td>
                <td class="tier1"><img id="11" class="tier-image" src="./artifact/剣闘士の未練.png" onclick="changeImageClass(this, 11)"></td>
                <td class="tier1"><img id="12" class="tier-image" src="./artifact/魂香の花_5.png" onclick="changeImageClass(this, 12)"></td>
                <td class="tier1"><img id="13" class="tier-image" src="./artifact/諸王の都の始まり.jpg" onclick="changeImageClass(this, 13)"></td>
                <td class="tier1"><img id="14" class="tier-image" src="./artifact/吹雪の中の思い_5.png" onclick="changeImageClass(this, 14)"></td>
                <td class="tier1"><img id="15" class="tier-image" src="./artifact/覇絆の花_5.png" onclick="changeImageClass(this, 15)"></td>
              </tr>
              <tr>
                <td class="tier1"><img id="16" class="tier-image" src="./artifact/彼方にある少女の心_5.png" onclick="changeImageClass(this, 16)"></td>
                <td class="tier1"><img id="17" class="tier-image" src="./artifact/魔女の炎の花_5.png" onclick="changeImageClass(this, 17)"></td>
                <td class="tier1"><img id="18" class="tier-image" src="./artifact/夢境の鉄花_5.png" onclick="changeImageClass(this, 18)"></td>
                <td class="tier1"><img id="19" class="tier-image" src="./artifact/無垢の花_5.png" onclick="changeImageClass(this, 19)"></td>
                <td class="tier1"><img id="20" class="tier-image" src="./artifact/迷宮の遊客_5.png" onclick="changeImageClass(this, 20)"></td>
                <td class="tier1"><img id="21" class="tier-image" src="./artifact/野花の記憶の草原_5.png" onclick="changeImageClass(this, 21)"></td>
                <td class="tier1"><img id="22" class="tier-image" src="./artifact/悠久の盤岩_5.jpg" onclick="changeImageClass(this, 22)"></td>
                <td class="tier1"><img id="23" class="tier-image" src="./artifact/雷鳥の憐み.png" onclick="changeImageClass(this, 23)"></td>
              </tr>
              <tr>
                <td class="tier1"><img id="24" class="tier-image" src="./artifact/雷討ちの心.png" onclick="changeImageClass(this, 24)"></td>
                <td class="tier1"><img id="25" class="tier-image" src="./artifact/旅中の花.png" onclick="changeImageClass(this, 25)"></td>
                <td class="tier1"><img id="26"class="tier-image" src="./artifact/霊光起源の蕊.png" onclick="changeImageClass(this, 26)"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div id="index-display"></div>

<br>
  <label for="weapon_name">武器</label>
<br>
    <select id="weapon_index" required onchange="show_weapon_statsform()" size="4">
      <option hidden>武器選択</option>
      <optgroup label="法器">
        <option value="0" selected>千夜に浮かぶ夢</option>
        <option value="1">神楽の真意</option>
        <option value="2">祭礼の断片</option>
      </optgroup>
      <optgroup label="長柄">
        <option value="3">護摩の杖</option>
        <option value="4">草薙の稲光</option>
        <option value="5">漁獲</option>
      </optgroup>
    </select>
    <select id="weapon_level">
        <option value="60+">60+</option>
        <option value="70">70</option>
        <option value="70+">70+</option>
        <option value="80">80</option>
        <option value="80+">80+</option>
        <option value="90" selected>90</option>
     </select>
     <select id="weapon_rank">
        <option value="1" selected>R1</option>
        <option value="2">R2</option>
        <option value="3">R3</option>
        <option value="4">R4</option>
        <option value="5">R5</option>
     </select>
</div> 

 <br>
  <select id="clock_mainstatus">
    <option hidden>時計</option>
    <option value="0">HP％</option>
    <option value="4">攻撃力％</option>
    <option value="1">防御力％</option>
    <option value="2" selected>元素熟知</option>
    <option value="3">元素チャージ効率</option>
  </select>
  <select id="goblet_mainstatus">
    <option hidden>杯</option>
    <option value="0">HP％</option>
    <option value="4">攻撃力％</option>
    <option value="1">防御力％</option>
    <option value="2" selected>元素熟知</option>
    <option value="7">ダメージバフ</option>  
  </select>
  <select id="circlet_mainstatus">
    <option hidden>冠</option>
    <option value="0">HP％</option>
    <option value="4">攻撃力％</option>
    <option value="1">防御力％</option>
    <option value="2">元素熟知</option>
    <option value="5">会心率</option>  
    <option value="6" selected>会心ダメージ</option>  
  </select>
 <br>
 <br>
<fieldset id="characterInfo" style="width: 400px;"></fieldset>
<fieldset id="weaponInfo" style="width: 400px;"></fieldset>

 <br>
 <fieldset id="sub_statusInfo" style="width: 400px;">
 <legend>聖遺物ステータス上昇値</legend>
 <div id="status_setting">
 <div id="hp_form" style="display: none;">
  <label for="af_hp">HP：</label>
  <input type="number" id="af_hp" required min = "0" name="af_hp">
</div>

<div id="attck_form" style="display: none;">
  <label for="af_attck">攻撃力：</label>
  <input type="number" id="af_attck"  required min = "0" name="af_attck">
</div>

<div id="deff_form" style="display: none;">
  <label for="af_deff">防御力：</label>
  <input type="number" id="af_deff" required min = "0" name="af_deff">
</div>

<div id="elm_form" style="display: none;">
  <label for="af_elm">元素熟知：</label>
  <input type="number" id="af_elm" required min = "0" name="af_elm" >
</div>

<div id="elm_charge_form" style="display: none;">
  <label for="af_elm_charge">元素チャージ効率：</label>
  <input type="number" id="af_elm_charge" required min = "0" name="af_elm_charge">
  <span>(%)</span>
</div>

<div id="cr_form" style="display: none;">
  <label for="af_cr">会心率：</label>
  <input type="number" id="af_cr" required min = "0" name="af_cr">
  <span>(%)</span>
</div>

<div id="cd_form" style="display: none;">
  <label for="af_cd">会心ダメージ：</label>
  <input type="number" id="af_cd" required min = "0" name="af_cd">
  <span>(%)</span>
</div>
</div>
</fieldset>

<fieldset id="fix_buff_info" style="width: 400px;">
  <legend>固定バフ</legend>
  <div id="fix_buff_setting">

  <div id="fix_hp_form" style="display: none;">
   <label for="fix_hp_buff">HP実数値：</label>
   <input type="number" id="fix_hp_buff" required min = "0" name="fix_hp_buff" value="0">
 </div>

 <div id="fix_hp%_form" style="display: none;">
  <label for="fix_hp%_buff">HP％：</label>
  <input type="number" id="fix_hp%_buff" required min = "0" name="fix_hp%_buff" value="0">
  <span>(%)</span>
</div>
 
 <div id="fix_attack_form" style="display: none;">
   <label for="fix_attack_buff">攻撃力実数値：</label>
   <input type="number" id="fix_attack_buff"  required min = "0" name="fix_attack_buff" value="0">
 </div>

 <div id="fix_attack%_form" style="display: none;">
  <label for="fix_attack%_buff">攻撃力％：</label>
  <input type="number" id="fix_attack%_buff"  required min = "0" name="fix_attack%_buff" value="0">
  <span>(%)</span>
</div>
 
 <div id="fix_deff_form" style="display: none;">
   <label for="fix_deff_buff">防御力実数値：</label>
   <input type="number" id="fix_deff_buff" required min = "0" name="fix_deff_buff" value="0">
 </div>

 <div id="fix_deff%_form" style="display: none;">
  <label for="fix_deff%_buff">防御力％：</label>
  <input type="number" id="fix_deff%_buff" required min = "0" name="fix_deff%_buff" value="0">
  <span>(%)</span>
</div>
 
 <div id="fix_elm_form" style="display: none;">
   <label for="fix_elm_buff">元素熟知：</label>
   <input type="number" id="fix_elm_buff" required min = "0" name="fix_elm_buff" value="0">
 </div>
 
 <div id="fix_elm_charge_form" style="display: none;">
   <label for="fix_elm_charge_buff">元素チャージ効率：</label>
   <input type="number" id="fix_elm_charge_buff" required min = "0" name="fix_elm_charge_buff"  value="0">
   <span>(%)</span>
 </div>
 
 <div id="fix_cr_form" style="display: none;">
   <label for="fix_cr_buff">会心率：</label>
   <input type="number" id="fix_cr_buff" required min = "0" name="fix_cr_buff" value="0">
   <span>(%)</span>
 </div>
 
 <div id="fix_cd_form" style="display: none;">
  <label for="fix_cd_buff">会心ダメージ：</label>
  <input type="number" id="fix_cd_buff" required min = "0" name="fix_cd_buff" value="0">
  <span>(%)</span>
</div>
 </div>
 </fieldset>

 <fieldset id="dynamic_buff_info" style="width: 400px;">
  <legend>変動バフ</legend>
  <div id="dynamic_buff_setting">

  <div id="dynamic_hp_form" style="display: none;">
   <label for="dynamic_hp_buff">HP実数値：</label>
   <input type="number" id="dynamic_hp_buff" required min = "0" name="dynamic_hp_buff" value="0">
 </div>

 <div id="dynamic_hp%_form" style="display: none;">
  <label for="dynamic_hp%_buff">HP％：</label>
  <input type="number" id="dynamic_hp%_buff" required min = "0" name="dynamic_hp%_buff" value="0">
  <span>(%)</span>
</div>
 
 <div id="dynamic_attack_form" style="display: none;">
   <label for="dynamic_attack_buff">攻撃力実数値：</label>
   <input type="number" id="dynamic_attack_buff"  required min = "0" name="dynamic_attack_buff" value="0">
 </div>

 <div id="dynamic_attack%_form" style="display: none;">
  <label for="dynamic_attack%_buff">攻撃力％：</label>
  <input type="number" id="fix_attack%_buff"  required min = "0" name="dynamic_attack%_buff" value="0">
  <span>(%)</span>
</div>
 
 <div id="dynamic_deff_form" style="display: none;">
   <label for="dynamic_deff_buff">防御力実数値：</label>
   <input type="number" id="dynamic_deff_buff" required min = "0" name="dynamic_deff_buff" value="0">
 </div>

 <div id="dynamic_deff%_form" style="display: none;">
  <label for="dynamic_deff%_buff">防御力％：</label>
  <input type="number" id="dynamic_deff%_buff" required min = "0" name="dynamic_deff%_buff" value="0">
  <span>(%)</span>
</div>
 
 <div id="dynamic_elm_form" style="display: none;">
   <label for="dynamic_elm_buff">元素熟知：</label>
   <input type="number" id="dynamic_elm_buff" required min = "0" name="dynamic_elm_buff" value="0">
 </div>
 
 <div id="dynamic_elm_charge_form" style="display: none;">
   <label for="dynamic_elm_charge_buff">元素チャージ効率：</label>
   <input type="number" id="dynamic_elm_charge_buff" required min = "0" name="dynamic_elm_charge_buff"  value="0">
   <span>(%)</span>
 </div>
 
 <div id="dynamic_cr_form" style="display: none;">
   <label for="dynamic_cr_buff">会心率：</label>
   <input type="number" id="dynamic_cr_buff" required min = "0" name="dynamic_cr_buff" value="0">
   <span>(%)</span>
 </div>
 
 <div id="dynamic_cd_form" style="display: none;">
  <label for="dynamic_cd_buff">会心ダメージ：</label>
  <input type="number" id="dynamic_cd_buff" required min = "0" name="dynamic_cd_buff" value="0">
  <span>(%)</span>
</div>
 </div>
 </fieldset>

<br>
<button id="calculateButton" style="display: none;" onclick="monte_carlo_calculate()">最適化計算</button>

<div id="response" ><br></div>

<table class="result v-style" style="width: 600px; table-layout: fixed">
  <colgroup>
    <col style="width: 25%;">
    <col style="width: 22%;">
    <col style="width: 14%;">
    <col style="width: 17%;">
  </colgroup>
  <thead>
    <tr>
      <th></th>
      <th>基礎ステータス</th>
      <th>バフ</th>
      <th>聖遺物バフ</th>
      <th>最終ステータス</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>HP</span>
      </th>
      <td id = table_base_hp>-</td>
      <td id = table_buff_hp>-</td>
      <td id = table_af_hp>-</td>
      <td id = table_final_hp>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>攻撃力</span>
      </th>
      <td id = table_base_attck>-</td>
      <td id = table_buff_attck>-</td>
      <td id = table_af_attck>-</td>
      <td id = table_final_attck>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>防御力</span>
      </th>
      <td id = table_base_deff>-</td>
      <td id = table_buff_deff>-</td>
      <td id = table_af_deff>-</td>
      <td id = table_final_deff>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素熟知</span>
      </th>
      <td id = table_base_elm>-</td>
      <td id = table_buff_elm>-</td>
      <td id = table_af_elm>-</td>
      <td id = table_final_elm>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素チャージ効率</span>
      </th>
      <td id = table_base_elm_charge>-</td>
      <td id = table_buff_elm_charge>-</td>
      <td id = table_af_elm_charge>-</td>
      <td id = table_final_elm_charge>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心率</span>
      </th>
      <td id = table_base_cr>-</td>
      <td id = table_buff_cr>-</td>
      <td id = table_af_cr>-</td>
      <td id = table_final_cr>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心ダメージ</span>
      </th>
      <td id = table_base_cd>-</td>
      <td id = table_buff_cd>-</td>
      <td id = table_af_cd>-</td>
      <td id = table_final_cd>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>ダメージバフ</span>
      </th>
      <td id = table_base_dmg_buff>-</td>
      <td id = table_buff_dmg_buff>-</td>
      <td id = table_af_dmg_buff>-</td>
      <td id = table_final_dmg_buff>-</td>
    </tr>
  </tbody>
</table>
<br>
<div id="result"></div>
<br>
<button onclick="showTable('table1')">各ステータス</button>
  <button onclick="showTable('table2')">スコア分布</button>
  <button onclick="showTable('table3')">サブステータス分布</button>
<br>
<br>
  <div id="table1" class="tablecontainer">
    <!-- 表1の内容 -->
<table class="calc_result" style="width: 500px; table-layout: fixed">
  <colgroup>
    <col style="width: 30%;">
    <col style="width: 35%;">
  </colgroup>
  <thead>
    <tr>
      <th></th>
      <th  style="text-align: left;">自己ステータス</th>
      <th  style="text-align: left;">最適化ステータス</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>HP</span>
      </th>
      <td id = my_result_hp>-</td>
      <td id = appro_result_hp>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>攻撃力</span>
      </th>
      <td id = my_result_attck>-</td>
      <td id = appro_result_attck>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>防御力</span>
      </th>
      <td id = my_result_deff>-</td>
      <td id = appro_result_deff>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素熟知</span>
      </th>
      <td id = my_result_elm>-</td>
      <td id = appro_result_elm>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素チャージ効率</span>
      </th>
      <td id = my_result_elm_charge>-</td>
      <td id = appro_result_elm_charge>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心率</span>
      </th>
      <td id = my_result_cr>-</td>
      <td id = appro_result_cr>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心ダメージ</span>
      </th>
      <td id = my_result_cd>-</td>
      <td id = appro_result_cd>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>ダメージバフ</span>
      </th>
      <td id = my_result_dmg_buff>-</td>
      <td id = appro_result_dmg_buff>-</td>
    </tr>
  </tbody>
</table>
  </div>

  <div id="table2" class="tablecontainer">
    <!-- 表2の内容 -->
<table class="calc_result" style="width: 690px; table-layout: fixed">
  <colgroup>
    <col style="width: 21%;">
    <col style="width: 19%;">
    <col style="width: 19%;">
    <col style="width: 19%;">
  </colgroup>
  <thead>
    <tr>
      <th></th>
      <th style="text-align: left;">自己スコア分布</th>
      <th style="text-align: left;">最適スコア分布</th>
      <th style="text-align: left;">聖遺物スコア差</th>
      <th style="text-align: left;">サブステ伸び回数</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>聖遺物スコア</span>
      </th>
      <td id = my_af_score>-</td>
      <td id = appro_af_score>-</td>
      <td id = dlt_af_score>-</td>
      <td id = count_af_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>HP</span>
      </th>
      <td id = my_hp_score>-</td>
      <td id = appro_hp_score>-</td>
      <td id = dlt_hp_score>-</td>
      <td id = count_hp_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>攻撃力</span>
      </th>
      <td id = my_attck_score>-</td>
      <td id = appro_attck_score>-</td>
      <td id = dlt_attck_score>-</td>
      <td id = count_attck_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>防御力</span>
      </th>
      <td id = my_deff_score>-</td>
      <td id = appro_deff_score>-</td>
      <td id = dlt_deff_score>-</td>
      <td id = count_deff_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素熟知</span>
      </th>
      <td id = my_elm_score>-</td>
      <td id = appro_elm_score>-</td>
      <td id = dlt_elm_score>-</td>
      <td id = count_elm_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素チャージ効率</span>
      </th>
      <td id = my_elm_charge_score>-</td>
      <td id = appro_elm_charge_score>-</td>
      <td id = dlt_elm_charge_score>-</td>
      <td id = count_elm_charge_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心率</span>
      </th>
      <td id = my_cr_score>-</td>
      <td id = appro_cr_score>-</td>
      <td id = dlt_cr_score>-</td>
      <td id = count_cr_score>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心ダメージ</span>
      </th>
      <td id = my_cd_score>-</td>
      <td id = appro_cd_score>-</td>
      <td id = dlt_cd_score>-</td>
      <td id = count_cd_score>-</td>
    </tr>
  </tbody>
</table>
  </div>

  <div id="table3" class="tablecontainer">
    <!-- 表3の内容 -->
   <table class="result v-style" style="width: 840px; table-layout: fixed">
  <colgroup>
    <col style="width: 18%;">
    <col style="width: 23%;">
    <col style="width: 23%;">
    <col style="width: 18%;">
  </colgroup>
  <thead>
    <tr>
      <th></th>
      <th>自己サブステータス分布</th>
      <th>最適サブステータス分布</th>
      <th>サブステータス差</th>
      <th>サブステ伸び回数</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>聖遺物スコア</span>
      </th>
      <td id = my_af_score3>-</td>
      <td id = appro_af_score3>-</td>
      <td id = dlt_af_score3>-</td>
      <td id = count_af_score3>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>HP</span>
      </th>
      <td id = my_af_hp>-</td>
      <td id = appro_af_hp>-</td>
      <td id = dlt_af_hp>-</td>
      <td id = count_hp_score3>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>攻撃力</span>
      </th>
      <td id = my_af_attck>-</td>
      <td id = appro_af_attck>-</td>
      <td id = dlt_af_attck>-</td>
      <td id = count_attck_score3>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>防御力</span>
      </th>
      <td id = my_af_deff>-</td>
      <td id = appro_af_deff>-</td>
      <td id = dlt_af_deff>-</td>
      <td id = count_deff_score3>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素熟知</span>
      </th>
      <td id = my_af_elm>-</td>
      <td id = appro_af_elm>-</td>
      <td id = dlt_af_elm>-</td>
      <td id = count_elm_score3>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>元素チャージ効率</span>
      </th>
      <td id = my_af_elm_charge>-</td>
      <td id = appro_af_elm_charge>-</td>
      <td id = dlt_af_elm_charge>-</td>
      <td id = count_elm_charge_score3>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心率</span>
      </th>
      <td id = my_af_cr>-</td>
      <td id = appro_af_cr>-</td>
      <td id = dlt_af_cr>-</td>
      <td id = count_cr_score3>-</td>
    </tr>
    <tr>
      <th rowspan="1" style="text-align: left;">
        <span>会心ダメージ</span>
      </th>
      <td id = my_af_cd>-</td>
      <td id = appro_af_cd>-</td>
      <td id = dlt_af_cd>-</td>
      <td id = count_cd_score3>-</td>
    </tr>
  </tbody>
</table>
  </div>
    <script>
      let clickedImages = [];
      let selectedImageIds = [20, 20];
      let selectedCharId = "56";
      let buttonscondition = [0,0,0,0,0,0,0];
      window.addEventListener("DOMContentLoaded", function() {
        show_char_statsform();
        show_weapon_statsform();
        showTable('table1')
      });
      document.getElementById('status_setting').addEventListener('input', calculate_table_status);
      document.getElementById('choose_char_weapon').addEventListener('change', calculate_table_status);
      document.getElementById('characterInfo').addEventListener('change', calculate_table_status);
      document.getElementById('fix_buff_info').addEventListener('input', calculate_table_status);
      document.getElementById('weaponInfo').addEventListener('change', calculate_table_status);
      fix_buff_info
      function showTable(tableId) {
      // すべての表コンテナを非表示にする
      let tableContainers = document.getElementsByClassName("tablecontainer");
      for (var i = 0; i < tableContainers.length; i++) {
        tableContainers[i].classList.remove("active");
      }
      // 選択された表コンテナを表示する
      document.getElementById(tableId).classList.add("active");
    }

function changeImageClass(image) {
  if (clickedImages.length >= 2) {
    const previousImage = clickedImages.shift();
    previousImage.classList.remove("tier-image2");
  }

  if (!image.classList.contains("tier-image2")) {
    image.classList.add("tier-image2");
    clickedImages.push(image);
  }
}

function handleImageSelection(images, popupImages, indexDisplay) {
  const imageIdToSrc = {};

  indexDisplay.textContent = `選択された画像のID: ${selectedImageIds.join(', ')}`;

  function handleImageClick() {
    const selectedImageId = this.getAttribute('id');
    selectedImageIds.push(selectedImageId);

    if (selectedImageIds.length > 2) {
      selectedImageIds.shift();
    }

    selectedImageIds.forEach(function(selectedImageId, index) {
      const selectedImageSrc = imageIdToSrc[selectedImageId] || '';
      popupImages[index].setAttribute('src', selectedImageSrc);
      popupImages[index].parentNode.classList.toggle('selected', !!selectedImageId);
    });

    indexDisplay.textContent = `選択された画像のID: ${selectedImageIds.join(', ')}`;
  }

  for (let i = 0; i < images.length; i++) {
    const image = images[i];
    const imageId = image.getAttribute('id');
    const imageSrc = image.getAttribute('src');
    imageIdToSrc[imageId] = imageSrc;
    image.addEventListener('click', handleImageClick);
  }
}

function handleCharSelection(images, popupImage, indexDisplay) {
  const imageIdToSrc = {};

  indexDisplay.textContent = `選択された画像のID: ${selectedCharId || '-'}`;

  function handleCharClick() {
    const newSelectedCharId = this.getAttribute('id');

    if (selectedCharId) {
      const previousImage = document.getElementById(selectedCharId);
      previousImage.classList.remove('selected');
    }

    selectedCharId = newSelectedCharId;

    const selectedImageSrc = imageIdToSrc[selectedCharId] || '';
    popupImage.setAttribute('src', selectedImageSrc);
    popupImage.parentNode.classList.toggle('selected', !!selectedCharId);

    indexDisplay.textContent = `選択された画像のID: ${selectedCharId || '-'}`;
    const checkbox = document.getElementById('pop-up_char');
    checkbox.checked = false;
    show_char_statsform();
    calculate_table_status();
  }

  for (let i = 0; i < images.length; i++) {
    const image = images[i];
    const imageId = image.getAttribute('id');
    const imageSrc = image.getAttribute('src');
    imageIdToSrc[imageId] = imageSrc;
    image.addEventListener('click', handleCharClick);
  }
}


function toggleTableRow(index) 
{
  const rows = document.querySelectorAll('.table-container1 table tbody tr');
  const buttons = document.querySelectorAll('.table-buttons button');
  if (buttonscondition[index] === 1) 
  {
    for (let k = 0; k < 7; k++)
    {
      rows[k].style.display = 'table-row';
      buttonscondition[k] = 0;
    }
    buttons[index].classList.add('active');
  } 
  else
  {
    for (let k = 0; k < 7; k++)
    {
      rows[k].style.display = 'none';
      buttonscondition[k] = 0
    }
    buttonscondition[index] = 1
    rows[index].style.display = 'table-row';
    buttons[index].classList.remove('active');
  }
}

window.addEventListener('DOMContentLoaded', function() {
  const images = document.querySelectorAll('.overlay img');
  const popupImages = document.querySelectorAll('.open img');
  const indexDisplay = document.getElementById('index-display');
  handleImageSelection(images, popupImages, indexDisplay);

  // 最初の2つの画像を選択済みにする処理
  let image = images[20];
  changeImageClass(image);
  changeImageClass(image);

  const overlay = document.querySelector('.overlay');
  overlay.addEventListener('click', function(event) {
    if (!event.target.closest('.window')) {
      const checkbox = document.getElementById('pop-up');
      checkbox.checked = false;
    }
  });

  const charImages = document.querySelectorAll('.overlay_char img');
  const charPopupImage = document.querySelector('.open_char img');
  const charIndexDisplay = document.getElementById('Charindex-display');
  handleCharSelection(charImages, charPopupImage, charIndexDisplay);

  const charOverlay = document.querySelector('.overlay_char');
  charOverlay.addEventListener('click', function(event) {
    if (!event.target.closest('.window')) {
      const checkbox = document.getElementById('pop-up_char');
      checkbox.checked = false;
    }
  });
});

  </script>

  </body>